<!DOCTYPE html><html lang="ru" prefix="og: http://ogp.me/ns# ya: http://webmaster.yandex.ru/vocabularies/config article: http://ogp.me/ns/article#"><head><meta charset="utf-8"><meta name="author" content="Роман Татауров"><title>Запускаем Wi-Fi на Orange Pi Zero Plus 2 H3</title><meta name="description" content="Как исправить проблемы с Wi-Fi на платах типа Orange Pi Zero Plus 2 H3/H5 при использовании ОС Armbian"><meta name="keywords" content="Armbian,Orange Pi,Orange Pi Zero Plus 2 H3,Broadcom,Broadcom BCM43430"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta property="og:title" content=""><meta property="og:site_name" content="DiyTronic"><meta property="og:locale" content="ru_RU"><meta property="og:url" content="https://diytronic.ru/2022/11/11/fixing-wi-fi-issues-on-orange-pi-zero-plus-2-h3/"><meta property="og:type" content="article"><meta property="og:description"><meta property="article:tag" content="[&quot;Armbian&quot;,&quot;Orange Pi&quot;,&quot;Orange Pi Zero Plus 2 H3&quot;,&quot;Broadcom&quot;,&quot;Broadcom BCM43430&quot;]"><meta property="article:section" content="[&quot;Разное&quot;]"><meta property="article:published_time" content="2022-11-11T02:25:17.000Z"><meta property="article:modified_time" content="2022-11-11T02:25:17.000Z"><meta name="DC.Title" content="Запускаем Wi-Fi на Orange Pi Zero Plus 2 H3"><meta name="DC.Subject"><meta name="DC.Creator" content="Роман Татауров"><meta name="DC.Creator.Name" content="Роман Татауров"><meta name="DC.Date" scheme="WTN8601" content="2022-11-11T02:25:17.000Z"><meta name="DC.Type" content="Text"><meta name="DC.Language" content="ru-RU"><meta name="apple-mobile-web-app-title" content="WebHive"><meta name="application-name" content="WebHive"><meta name="msapplication-TileColor" content="#2b5797"><meta name="theme-color" content="#ffffff"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link type="text/css" rel="stylesheet" href="/css/app-66a13052.css"><link rel="alternate" href="/atom.xml" title="DiyTronic | Заметки об электронике, программировании, 3D-печати" type="application/atom+xml"><meta name="generator" content="Hexo 5.4.2"></head><body class="page" itemscope itemtype="http://schema.org/WebPage" itemid="https://diytronic.ru/2022/11/11/fixing-wi-fi-issues-on-orange-pi-zero-plus-2-h3/"><section class="header"> <div class="header__content"><div class="content-wrapper content-wrapper_header"><div class="title-box"><button class="button button_header button_left js-main-nav"><span class="icon"><svg width="24" height="24" viewBox="0 0 1000 1000"><path d="M108,206h784c54.1,0,98-43.9,98-98c0-54.1-43.9-98-98-98H108c-54.1,0-98,43.9-98,98C10,162.1,53.9,206,108,206z M892,402H108c-54.1,0-98,43.9-98,98c0,54.1,43.9,98,98,98h784c54.1,0,98-43.9,98-98C990,445.9,946.1,402,892,402z M892,794H108c-54.1,0-98,43.9-98,98c0,54.1,43.9,98,98,98h784c54.1,0,98-43.9,98-98C990,837.9,946.1,794,892,794z"></path></svg></span></button><a href="/"><img class="title-box__logo logo logo--main" src="/images/logo.png"/></a><h1 class="title-box__title"><a href="/">DiyTronic</a></h1><div class="title-box__description"><a href="/">Заметки об электронике, программировании, 3D-печати</a></div><button class="button button_header button_right js-search"><span class="icon"><svg width="24" height="24" viewBox="0 0 1000 1000"><path d="M688.5,424.6c0-72.6-25.8-134.8-77.4-186.4s-113.8-77.4-186.4-77.4s-134.8,25.8-186.4,77.4S160.8,352,160.8,424.6c0,72.6,25.8,134.8,77.4,186.4c51.6,51.6,113.8,77.4,186.4,77.4S559.4,662.6,611,611C662.6,559.4,688.5,497.3,688.5,424.6L688.5,424.6z M990,914.6c0,20.4-7.5,38.1-22.4,53c-14.9,14.9-32.6,22.4-53,22.4c-21.2,0-38.9-7.5-53-22.4l-202-201.4c-70.3,48.7-148.6,73-235,73c-56.1,0-109.8-10.9-161.1-32.7s-95.4-51.2-132.5-88.3c-37.1-37.1-66.5-81.3-88.3-132.5C20.9,534.5,10,480.8,10,424.6s10.9-109.8,32.7-161.1S93.9,168.1,131,131c37.1-37.1,81.3-66.6,132.5-88.3S368.5,10,424.6,10s109.8,10.9,161.1,32.7c51.2,21.8,95.4,51.2,132.5,88.3c37.1,37.1,66.6,81.3,88.3,132.5c21.8,51.2,32.7,104.9,32.7,161.1c0,86.4-24.3,164.7-73,235l202,202C982.7,876.1,990,893.8,990,914.6L990,914.6z"></path></svg></span></button></div><nav class="main-nav" itemscope itemtype="http://schema.org/SiteNavigationElement"><ul class="main-menu-bar"><li class="main-menu-bar__item"><a class="main-menu-bar__item-link" itemprop="url" href="/">Главная</a></li><li class="main-menu-bar__item"><a class="main-menu-bar__item-link" itemprop="url" href="/categories/uncategorized/">Разное</a></li><li class="main-menu-bar__item"><a class="main-menu-bar__item-link" itemprop="url" href="/categories/3d-print/">3D Печать</a></li><li class="main-menu-bar__item"><a class="main-menu-bar__item-link" itemprop="url" href="/categories/programming/">Программирование</a></li><li class="main-menu-bar__item"><a class="main-menu-bar__item-link" itemprop="url" href="/categories/electronics/">Электроника</a></li><li class="main-menu-bar__item"><a class="main-menu-bar__item-link" itemprop="url" href="/categories/repair/">Ремонт</a></li><li class="main-menu-bar__item"><a class="main-menu-bar__item-link js-#{i}" itemprop="url" href="/archives">Архив</a></li><li class="main-menu-bar__item"><a class="main-menu-bar__item-link js-#{i}" itemprop="url" href="/search">Поиск</a></li></ul></nav><script>var yandexSearchOptions = {
  action: '/search/',
  arrow: false,
  bg: 'transparent',
  fontsize: 16,
  fg: '#FFF',
  language: 'ru',
  logo: 'rb',
  publicname: 'Поиск по сайту www.diytronic.ru',
  suggest: false,
  target: '_self',
  tld: 'ru',
  type: 2,
  searchid: 2298791,
  webopt: false,
  websearch: false,
  input_fg: '#FFF',
  input_bg: 'transparent',
  input_fontStyle: 'normal',
  input_fontWeight: 'normal',
  input_placeholder: 'Поиск по сайту',
  input_placeholderColor: '#FFF',
  input_borderColor: 'transparent'
}
</script><div class="content-wrapper__search-box"><button class="button button_type_close button__control js-close-search"><span class="icon"><svg width="32" height="32" viewBox="0 0 348.333 348.334"><path d="M336.559,68.611L231.016,174.165l105.543,105.549c15.699,15.705,15.699,41.145,0,56.85   c-7.844,7.844-18.128,11.769-28.407,11.769c-10.296,0-20.581-3.919-28.419-11.769L174.167,231.003L68.609,336.563   c-7.843,7.844-18.128,11.769-28.416,11.769c-10.285,0-20.563-3.919-28.413-11.769c-15.699-15.698-15.699-41.139,0-56.85   l105.54-105.549L11.774,68.611c-15.699-15.699-15.699-41.145,0-56.844c15.696-15.687,41.127-15.687,56.829,0l105.563,105.554   L279.721,11.767c15.705-15.687,41.139-15.687,56.832,0C352.258,27.466,352.258,52.912,336.559,68.611z"></path></svg></span></button><div class="ya-site-form ya-site-form_inited_no" onclick="return yandexSearchOptions"><form class="search" action="https://yandex.ru/sitesearch" method="get" target="_self"><input type="hidden" name="searchid" value="2298791"/><input type="hidden" name="l10n" value="ru"/><input type="hidden" name="reqenc" value=""/><span class="input input_search"><span class="input__box"><input class="input__control" placeholder="Поиск" name="text"></span></span><button class="button button_type_submit button_search button__control" type="submit"><span class="icon"><svg width="24" height="24" viewBox="0 0 512 512"><path d="M445,386.7l-84.8-85.9c13.8-24.1,21-50.9,21-77.9c0-87.6-71.2-158.9-158.6-158.9C135.2,64,64,135.3,64,222.9c0,87.6,71.2,158.9,158.6,158.9c27.9,0,55.5-7.7,80.1-22.4l84.4,85.6c1.9,1.9,4.6,3.1,7.3,3.1c2.7,0,5.4-1.1,7.3-3.1l43.3-43.8C449,397.1,449,390.7,445,386.7z M222.6,125.9c53.4,0,96.8,43.5,96.8,97c0,53.5-43.4,97-96.8,97c-53.4,0-96.8-43.5-96.8-97C125.8,169.4,169.2,125.9,222.6,125.9z"></path></svg></span></button></form></div></div><footer class="copyright copyright--sidebar">&copy; 2024 DiyTronic</footer></div></div><div class="header__overlay"></div></section><div class="content-wrapper content-wrapper_main"><main class="content content_main" itemprop="mainEntityOfPage"> <article class="post post--full" itemscope itemtype="http://schema.org/Article" itemprop="mainEntityOfPage">
  <header>
    <h2 class="post__title" itemprop="headline">
      <a class="link link__control link_post-title" href="/2022/11/11/fixing-wi-fi-issues-on-orange-pi-zero-plus-2-h3/">
        Запускаем Wi-Fi на Orange Pi Zero Plus 2 H3
      </a>
    </h2>
    <div class="post__meta">
      <time class="post__date" datetime="2022-11-11T02:25:17.000Z" itemprop="datePublished">
        11 ноября 2022
      </time>
      <span class="post__author" itemscope itemtype="http://schema.org/Person" itemprop="author"> Автор: <span itemprop="name">Роман Татауров</span></span>
      <meta itemscope itescope itemType="https://schema.org/Person" itemprop="publisher" content="Роман Татауров" />
      <a class="link link__control link_comments-count" href="https://diytronic.ru/2022/11/11/fixing-wi-fi-issues-on-orange-pi-zero-plus-2-h3/#disqus_thread"></a>
    </div>
  </header>

  <div class="post__entry" itemprop="articleBody">
    
    <p>В ходе настройки Orange Pi&nbsp;Zero Plus 2 H3&nbsp;обнаружил, что есть конкретные проблемы с&nbsp;Wi-Fi. В&nbsp;зависимости от&nbsp;используемого дистрибутива Linux имеем либо негрузящайся драйвер, либо работают только первые 11&nbsp;каналов Wi-Fi, а&nbsp;учитывая, что моих сетей там&nbsp;нет, это проблема, которую пришлось решать. Решение я&nbsp;нашёл и&nbsp;ниже я&nbsp;его вам покажу и&nbsp;расскажу как с&nbsp;этой проблемой бороться.</p>
<span id="more"></span>
<p>Итак, хотелось мне запустить эту плату именно в&nbsp;Armbin, но&nbsp;именно этот дистрибутив славился&nbsp;тем, что данная плата в&nbsp;нём Wi-Fi не&nbsp;поддерживала. Но&nbsp;мы&nbsp;не&nbsp;ищем лёгких путей и&nbsp;из-за какого-то там чортова драйвера менять дистрибутив для меня просто унижение. Если драйвер есть и&nbsp;он&nbsp;в&nbsp;принципе работает, то&nbsp;и&nbsp;в&nbsp;Armbian он&nbsp;у&nbsp;меня заработает. Вызов принят!</p>
<h2 id="получаем-проблему">Получаем проблему</h2>
<p>Итак, первым делом накатываем Armbian. На&nbsp;официальной стрaнице образа для данной платы я&nbsp;не&nbsp;нашёл, но&nbsp;зато нашёл где эти сборки выкладываются. В&nbsp;общем качаем отсюда <a target="_blank" rel="noopener" href="https://fi.mirror.armbian.de/archive/orangepizeroplus2-h3/archive/">https://fi.mirror.armbian.de/archive/orangepizeroplus2-h3/archive/</a>. Я&nbsp;использовал версию bullseye. Пробовал jammy, но&nbsp;там ровно тоже самое.</p>
<h2 id="альтернативные-драйвера">Альтернативные драйвера</h2>
<p>Они существуют и&nbsp;возможно работают.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/antoineco/broadcom-wl">https://github.com/antoineco/broadcom-wl</a></li>
<li><a target="_blank" rel="noopener" href="http://linuxwireless.sipsolutions.net/en/users/Drivers/b43/">http://linuxwireless.sipsolutions.net/en/users/Drivers/b43/</a></li>
</ul>
<p>Проблема одна&nbsp;&mdash; их&nbsp;надо качать, а&nbsp;сети&nbsp;нет. Можно конечно скачать код на&nbsp;другом компьютере, залить на&nbsp;карточку и&nbsp;попытаться собрать на&nbsp;плате, но&nbsp;слишком много возни и&nbsp;вероятно потребуется докачивать зависимости.</p>
<h2 id="анализируем-ошибки">Анализируем ошибки</h2>
<p>В итоге имеем условно работающий Wi-Fi из&nbsp;каробки с&nbsp;куцым списком доступных сетей и&nbsp;ошибки в&nbsp;логах при загрузке фирмвари данного драйвера.</p>
<p>Ошибки выглядят так</p>
<pre class="code language language-bash"><code class="language language-bash">% <span class="token function">dmesg</span> <span class="token operator">|</span> <span class="token function">grep</span> brcm
brcmfmac: brcmf_fw_alloc_request: using brcm/brcmfmac43430-sdio <span class="token keyword">for</span> chip BCM43430/1
brcmfmac mmc1:0001:1: Direct firmware load <span class="token keyword">for</span> brcm/brcmfmac43430-sdio.xunlong,orangepi-zero-plus2-h3.bin failed with error -2
brcmfmac mmc1:0001:1: Falling back to sysfs fallback for: brcm/brcmfmac43430-sdio.xunlong,orangepi-zero-plus2-h3.bin
brcmfmac mmc1:0001:1: Direct firmware load <span class="token keyword">for</span> brcm/brcmfmac43430-sdio.xunlong,orangepi-zero-plus2-h3.txt failed with error -2
brcmfmac mmc1:0001:1: Falling back to sysfs fallback for: brcm/brcmfmac43430-sdio.xunlong,orangepi-zero-plus2-h3.txt
brcmfmac: brcmf_fw_alloc_request: using brcm/brcmfmac43430-sdio <span class="token keyword">for</span> chip BCM43430/1
brcmfmac: brcmf_c_process_clm_blob: no clm_blob available <span class="token punctuation">(</span>err<span class="token operator">=</span>-2<span class="token punctuation">)</span>, device may have limited channels available
brcmfmac: brcmf_c_preinit_dcmds: Firmware: BCM43430/1 wl0: Mar <span class="token number">30</span> <span class="token number">2016</span> <span class="token number">11</span>:30:56 version <span class="token number">7.45</span>.77.h8.4 FWID 01-ee8a6268</code></pre>
<p>Как видно оно пытается загрузить какую-то фирмварь и&nbsp;не&nbsp;может найти нужных файлов. Придётся таки разбираться, что такое firmware и&nbsp;как оно грузится</p>
<h2 id="linux-и-firmware">Linux и&nbsp;firmware</h2>
<p>В общем, как выяснилось, для всяких проприетарных драйверов типа Broadcom-а у&nbsp;нас есть бинарные файлы (та самая firmware), которые и&nbsp;подгружаются родным линуксовым драйвером, чтобы всё работало как надо. Но&nbsp;кроме бинарника у&nbsp;нас есть некий конфиг, который есть ни&nbsp;что иное как набор переменных, которые заливаются в&nbsp;NVRAM драйвера.</p>
<h2 id="что-не-так-в-нашем-случае">Что не&nbsp;так в&nbsp;нашем случае</h2>
<p>Для нашего случая всё выглядит вот&nbsp;так.</p>
<pre class="code language language-bash"><code class="language language-bash">% <span class="token function">ls</span> -la /lib/firmware/brcm/*43430*
<span class="token punctuation">..</span>.
/lib/firmware/brcm/brcmfmac43430-sdio.bin   <span class="token comment"># &lt;=== бинарник фирмвари</span>
/lib/firmware/brcm/brcmfmac43430-sdio.txt   <span class="token comment"># &lt;=== конфиг</span></code></pre>
<p>Но как видно из&nbsp;ошибки, драйвер пытается загрузить firmware из&nbsp;файла с&nbsp;суффиксом вендора устройства, то&nbsp;есть <code>/lib/firmware/brcm/brcmfmac43430-sdio.xunlong,orangepi-zero-plus2-h3.bin</code> вместо <code>/lib/firmware/brcm/brcmfmac43430-sdio.bin</code>. Поэтому я&nbsp;решил просто создать нужные симлинки.</p>
<p>Забегая вперёд должен отметить, что это оказалось необязательно, а&nbsp;эта ошибка это скорее предупреждение. Походу драйвер таки находит фирмварь и&nbsp;по&nbsp;существующим именам. Но&nbsp;что сделано, то&nbsp;сделано и&nbsp;как минимум убираются сообщения об&nbsp;ошибках при загрузке.</p>
<p>После исправления имеем такую картину.</p>
<pre class="code language language-bash"><code class="language language-bash">% <span class="token function">ls</span> -la /lib/firmware/brcm/*43430*
<span class="token punctuation">..</span>.
/lib/firmware/brcm/brcmfmac43430-sdio.bin   <span class="token comment"># &lt;=== бинарник фирмвари</span>
/lib/firmware/brcm/brcmfmac43430-sdio.txt   <span class="token comment"># &lt;=== конфиг</span>
/lib/firmware/brcm/brcmfmac43430-sdio.xunlong,orangepi-zero-plus2-h3.bin -<span class="token operator">></span> /lib/firmware/brcm/brcmfmac43430-sdio.bin
/lib/firmware/brcm/brcmfmac43430-sdio.xunlong,orangepi-zero-plus2-h3.txt -<span class="token operator">></span> /lib/firmware/brcm/brcmfmac43430-sdio.txt</code></pre>
<p>Теперь при загрузке видим следующее</p>
<pre class="code language language-bash"><code class="language language-bash">% <span class="token function">dmesg</span> <span class="token operator">|</span> <span class="token function">grep</span> brcm
brcmfmac: brcmf_fw_alloc_request: using brcm/brcmfmac43430-sdio <span class="token keyword">for</span> chip BCM43430/1 <span class="token comment"># &lt;== стало норм</span>
brcmfmac: brcmf_fw_alloc_request: using brcm/brcmfmac43430-sdio <span class="token keyword">for</span> chip BCM43430/1 <span class="token comment"># &lt;== стало норм</span>
brcmfmac: brcmf_c_process_clm_blob: no clm_blob available <span class="token punctuation">(</span>err<span class="token operator">=</span>-2<span class="token punctuation">)</span>, device may have limited channels available
brcmfmac: brcmf_c_preinit_dcmds: Firmware: BCM43430/1 wl0: Mar <span class="token number">30</span> <span class="token number">2016</span> <span class="token number">11</span>:30:56 version <span class="token number">7.45</span>.77.h8.4 FWID 01-ee8a6268</code></pre>
<h2 id="задаём-код-региона">Задаём код региона</h2>
<p>Несмотря на&nbsp;успешную загрузку фирмвари, нас осталась ошибка как раз насчёт ограничения каналов и&nbsp;фирмварь ругается на&nbsp;какой-то <code>clm_blob</code>. Это как оказалось ещё один бинарник с&nbsp;региональными настройками для данного драйвера. И&nbsp;с&nbsp;этими самыми настройками полная чехарда. В&nbsp;разное время за&nbsp;это дело отвечали следующие подсистемы.</p>
<h3 id="crda-central-regulatory-domain-agent">CRDA (central regulatory domain agent) </h3>
<p>С этим связаны рекоммендации поправить регион в&nbsp;<code>/etc/default/crda</code>, но&nbsp;нифига не&nbsp;работает, так как эта тема устарела с&nbsp;версии ядра 4.15</p>
<h3 id="cfg80211">cfg80211</h3>
<p>Есть так&nbsp;же&nbsp;рекоммендации передать регион драйверу Linux cfg80211, но&nbsp;это тоже устарело и&nbsp;сегодня каждый драйвер должен сам уметь разбираться с&nbsp;такими делами.</p>
<pre class="code language language-bash"><code class="language language-bash"><span class="token builtin class-name">echo</span> <span class="token string">"options cfg80211 ieee80211_regdom=US"</span> <span class="token operator">></span> /etc/modprobe.d/cfg80211.conf</code></pre>
<h3 id="clm-blob">clm_blob</h3>
<p>Это по&nbsp;факту кусок базы данных, типа&nbsp;той, что использовалась в&nbsp;CRDA, но&nbsp;специфичный для данного драйвера. Как оказалось и&nbsp;этот метод устарел и&nbsp;вся информация уже должна содержаться в&nbsp;недрах драйвера. К&nbsp;слову я&nbsp;таки нашёл этот бинарь от&nbsp;Raspberry PI&nbsp;и&nbsp;подсунул для загрузки, но&nbsp;работать лучше не&nbsp;стало.</p>
<h3 id="и-что-таки-делать">И что таки делать?</h3>
<p>В итоге пришлось лезть в&nbsp;конфиг фирмвари и&nbsp;уже там я&nbsp;обнаружил подозрительную переменную <code>ccode=ALL</code>, поменяв значение которой, после перезагрузки я&nbsp;получил полный список Wi-Fi сетей.</p>
<pre class="code language language-ini"><code class="language language-ini"><span class="token comment">#AP6212_NVRAM_V1.0_20140603</span>
<span class="token comment"># 2.4 GHz, 20 MHz BW mode</span>

<span class="token comment"># The following parameter values are just placeholders, need to be updated.</span>
.....
<span class="token constant">xtalfreq</span><span class="token attr-value"><span class="token punctuation">=</span>26000</span>
<span class="token constant">nocrc</span><span class="token attr-value"><span class="token punctuation">=</span>1</span>
<span class="token constant">ag0</span><span class="token attr-value"><span class="token punctuation">=</span>255</span>
<span class="token constant">aa2g</span><span class="token attr-value"><span class="token punctuation">=</span>1</span>
<span class="token constant">ccode</span><span class="token attr-value"><span class="token punctuation">=</span>ALL # &lt;===== вот тут меняем ALL на RU </span>
<span class="token constant">extpagain2g</span><span class="token attr-value"><span class="token punctuation">=</span>0</span>
........</code></pre>
<p>Но тут есть проблема&nbsp;&mdash; при обновлении пакета с&nbsp;фирмварями этот файл будет перезаписываться.</p>
<h1 id="всё-чудесатее-и-чудесатее">Всё чудесатее и&nbsp;чудесатее</h1>
<p>Гугля по&nbsp;теме обнаружил ссылки на&nbsp;исходники с&nbsp;такими комментариями</p>
<pre class="code"><code>/* In some cases the EFI-var stored nvram contains "ccode=ALL" or
 * "ccode=XV" to specify "worldwide" compatible settings. ccode=ALL is
 * not understood by the firmware and some of the firmware files in
 * linux-firmware support only 2.4 GHz and not 5 GHz when ccode=XV.
 */</code></pre>
<p>Так, что видимо стоит попробовать вместо <strong>RU</strong> использовать <strong>XV</strong>. Возможно даже появится диапазон 5ГГц.</p>
<h1 id="я-сдаюсь">Я сдаюсь</h1>
<p>Кроме всего прочего искал способ прописать ccode в&nbsp;драйвер через /proc или /sys.<br>
Декомпилировал devicetree в&nbsp;надежде найти там способ перезаписать значения NVRAM.</p>
<p>Все тщетно. Походу эти фирмвари и&nbsp;драйвера для Broadcom писались через жопу, на&nbsp;скорую руку и&nbsp;всё, что нам остаётся это грязно патчить через подмену значения в&nbsp;этом текстовом конфиге.</p>
<h1 id="итого">Итого</h1>
<p>Как оказалось в&nbsp;принципе по&nbsp;минимуму достаточно поменять <code>ccode=ALL</code> на&nbsp;<code>ccode=RU</code> в&nbsp;конфиге фирмвари драйвера.</p>
<p>И видимо в&nbsp;автозагрузку придётся добавить скрипт для замены ccode в&nbsp;нужном файле.</p>
<h1 id="ссылки">Ссылки</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://help.ubuntu.com/community/WifiDocs/Driver/bcm43xx">https://help.ubuntu.com/community/WifiDocs/Driver/bcm43xx</a></li>
<li><a target="_blank" rel="noopener" href="https://wireless.wiki.kernel.org/en/users/Drivers/brcm80211">https://wireless.wiki.kernel.org/en/users/Drivers/brcm80211</a></li>
</ul>
  </div>

  <footer>
      <ul class="tags tags_post">
      <li class="tags__label"><i class="icon-tags"></i></li>
            <li class="tags__tag">
          <span class="tag" itemprop="articleSection">
            <a class="link link__control link_tag" tabindex="0" href="/tags/Armbian/">Armbian</a>
          </span>
        </li>
            <li class="tags__tag">
          <span class="tag" itemprop="articleSection">
            <a class="link link__control link_tag" tabindex="1" href="/tags/Orange-Pi/">Orange Pi</a>
          </span>
        </li>
            <li class="tags__tag">
          <span class="tag" itemprop="articleSection">
            <a class="link link__control link_tag" tabindex="2" href="/tags/Orange-Pi-Zero-Plus-2-H3/">Orange Pi Zero Plus 2 H3</a>
          </span>
        </li>
            <li class="tags__tag">
          <span class="tag" itemprop="articleSection">
            <a class="link link__control link_tag" tabindex="3" href="/tags/Broadcom/">Broadcom</a>
          </span>
        </li>
            <li class="tags__tag">
          <span class="tag" itemprop="articleSection">
            <a class="link link__control link_tag" tabindex="4" href="/tags/Broadcom-BCM43430/">Broadcom BCM43430</a>
          </span>
        </li>
          </ul>
  
  
    <ul class="categories categories_post">
      <li class="categories__label"><i class="icon-folder-empty"></i></li>
      
        <li class="categories__category">
          <span class="category" itemprop="articleSection">
            <a class="link link__control link_category" tabindex="0" href="/categories/uncategorized/">Разное</a>
          </span>
        </li>
      
    </ul>
  
  <div class="share" style="margin: 1rem 0; display: flex; flex-direction: row; font-size: 90%">
  <div class="share__label" style="margin-right: 0.5rem">Поделиться:</div>
  <div class="share__body ya-share2" data-services="vkontakte,lj" data-size="s" data-description="Как исправить проблемы с Wi-Fi на платах типа Orange Pi Zero Plus 2 H3/H5 при использовании ОС Armbian"></div>
</div>
  </footer>
</article>


<section class="comments">
  <h3 class="comments__title">Комментарии</h3>
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>



<footer class="copyright copyright--bottom">&copy; 2024 DiyTronic</footer>
</main></div><script>var disqus_config = function() {
  this.page.url = 'https://diytronic.ru/2022/11/11/fixing-wi-fi-issues-on-orange-pi-zero-plus-2-h3/';
  this.page.identifier = 'https://diytronic.ru/2022/11/11/fixing-wi-fi-issues-on-orange-pi-zero-plus-2-h3/';
};

(function() {  // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');
  s.src = 'https://diytronic.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();</script><noscript> <p class="disqus__no-js">Please enable JavaScript to view the <a target="_blank" href="https://disqus.com/?ref_noscript" rel="nofollow noopener">comments powered by Disqus.</a></p></noscript><!-- Yandex.Metrika counter--><script>(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
          w.yaCounter33124378 = new Ya.Metrika({
            id: '33124378',
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true,
            webvisor:true,
            trackHash:true
          });
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = "https://mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex.metrika_callbacks");</script><noscript><div><img src="https://mc.yandex.ru/watch/#{config.yandex.metrika}" style="position:absolute; left:-9999px;" alt=""></div></noscript><!-- /Yandex.Metrika counter--><script src="https://yastatic.net/share2/share.js" async="async"></script><script src="/js/app-8f31f535.js"></script></body></html>